from selenium import webdriver
import pickle
import time


class DumpCookies:
    def __init__(self,moodleid, moodlession):
        self.moodleid = moodleid
        self.moodlesession = moodlession
        self.lms_url = "https://lms.gedik.edu.tr/my"

    def lms_pkl(self):
        cookie = [
            {"domain":"lms.gedik.edu.tr","name":"MoodleSession", "value":self.moodlesession,"httpOnly":False, "path":"/","secure":True},
            {"domain":"lms.gedik.edu.tr","name":"MOODLEID", "value":self.moodleid,"httpOnly":False, "path":"/","secure":True}
        ]
        pickle.dump( cookie , open("cookies.pkl","wb"))

    def on_page(self):

        driver = webdriver.Firefox()
        driver.get(self.lms_url)
        driver.delete_all_cookies()
        cookies = pickle.load(open("cookies.pkl", "rb"))
        for cookie in cookies:
            driver.add_cookie(cookie)

        time.sleep(2)
        driver.get(self.lms_url)
        


if __name__ == "__main__":
    moodle_session = input("Moodle Session Giriniz: ")
    moodle_id = input("Moodle ID Girimiz: ")
    app = DumpCookies(moodle_id,moodle_session)
    app.lms_pkl()
    time.sleep(2)
    app.on_page()